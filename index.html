<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Just relax, ok?</title>
<style>
*{box-sizing:border-box;}
body{margin:0;font-family:Arial,sans-serif;background:#000;color:#fff;overflow:hidden;user-select:none;}
#bg{position:fixed;inset:0;background:url("D0AB2572-11AE-47A3-AD8D-A31B53372CB5.jpeg") center/cover no-repeat;filter:brightness(.7);z-index:-2;}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.88);display:flex;align-items:center;justify-content:center;text-align:center;z-index:10;}
.box{max-width:90%;font-size:18px;line-height:1.6;}
button{margin-top:20px;padding:12px 30px;font-size:18px;border:none;border-radius:30px;}
#app{width:100%;height:100vh;display:none;flex-direction:column;align-items:center;justify-content:center;}
#title{position:absolute;top:30px;font-size:22px;}
#timer{font-size:76px;font-weight:bold;letter-spacing:3px;}
</style>
</head>
<body>

<div id="bg"></div>

<!-- –û–±—É—á–µ–Ω–∏–µ -->
<div class="overlay" id="tutorial">
  <div class="box">
    <h2>Just relax</h2>
    <p>–ü—Ä–æ—Å—Ç–æ –∂–¥–∏ <b>15 –º–∏–Ω—É—Ç</b>.<br>–ù–µ —Å–≤–æ—Ä–∞—á–∏–≤–∞–π —Å–∞–π—Ç.<br>–ù–µ –±–ª–æ–∫–∏—Ä—É–π —ç–∫—Ä–∞–Ω.<br>–ù–µ –≤—ã–∫–ª—é—á–∞–π –º—É–∑—ã–∫—É.<br>–ï—Å—Ç—å –ø–∞—Å—Ö–∞–ª–∫–∞ üëÄ</p>
    <button id="startBtn">–ù–∞—á–∞—Ç—å</button>
  </div>
</div>

<!-- –ò–≥—Ä–∞ -->
<div id="app">
  <div id="title">Just relax, ok?</div>
  <div id="timer">15:00</div>
</div>

<!-- –§–∏–Ω–∞–ª -->
<div class="overlay" id="finish" style="display:none">
  <div class="box">
    <h2>üéâ –ú–æ–ª–æ–¥–µ—Ü!</h2>
    <p>–¢—ã –ø—Ä–æ—à–µ–ª(-–∞)<br><b>–∏—Å–ø—ã—Ç–∞–Ω–∏–µ 5</b></p>
  </div>
</div>

<!-- –í–∏–¥–µ–æ –¥–ª—è –º—É–∑—ã–∫–∏ -->
<video id="player" preload="auto" playsinline style="display:none"></video>

<script>
const tracks=[
  "—Å–µ–ª—å–¥–µ—Ä–µ–∂—É–π,-shut-up!-2.0.mp3",
  "–¥–µ–±—é—Ç.–º—Å.–±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏.mp3.mp3",
  "–ö—É—Ä—á–∞—Ç–∫–∏–Ω–∞.m4a",
  "VIP –°–ö–ê–ú .mp3",
  "ScreenRecording_12-11-2025 09-03-05_1 (Cover).mp3"
];

let currentTrack=0;
let totalSeconds=15*60;
let interval=null;
let running=false;
let lastTick=0;

const player=document.getElementById("player");
const timerEl=document.getElementById("timer");

// –§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏
function fmt(s){return String(Math.floor(s/60)).padStart(2,"0")+":"+String(s%60).padStart(2,"0");}

// –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ä—Ç
document.getElementById("startBtn").onclick=()=>{
  startMusic();
  start();
};

// –ó–∞–ø—É—Å–∫ –º—É–∑—ã–∫–∏ —á–µ—Ä–µ–∑ –≤–∏–¥–µ–æ
function startMusic(){
  player.src=tracks[currentTrack];
  player.muted=false;
  player.volume=1;
  player.play().catch(()=>{});
}

// –°—Ç–∞—Ä—Ç –∏–≥—Ä—ã
function start(){
  document.getElementById("tutorial").style.display="none";
  document.getElementById("finish").style.display="none";
  document.getElementById("app").style.display="flex";
  totalSeconds=15*60;
  timerEl.textContent=fmt(totalSeconds);
  running=true;
  lastTick=Date.now();
  startTimer();
}

// –¢–∞–π–º–µ—Ä
function startTimer(){
  clearInterval(interval);
  interval=setInterval(()=>{
    const now=Date.now();
    if(now-lastTick>1500){ resetAll(); return; }
    lastTick=now;
    totalSeconds--;
    timerEl.textContent=fmt(totalSeconds);
    if(totalSeconds===666){document.body.style.filter="hue-rotate(180deg)";}
    if(totalSeconds<=0){clearInterval(interval);complete();}
  },1000);
}

// –°–ª–µ–¥—É—é—â–∏–π —Ç—Ä–µ–∫
player.onended=()=>{
  currentTrack=(currentTrack+1)%tracks.length;
  player.src=tracks[currentTrack];
  player.play().catch(()=>{});
};

// –ê–Ω—Ç–∏-–ø–∞—É–∑–∞ –∏ –∞–Ω—Ç–∏-–ø–µ—Ä–µ–º–æ—Ç–∫–∞
player.addEventListener("pause",()=>{if(running) player.play().catch(()=>{});});
player.addEventListener("seeking",()=>{player.currentTime=0;});

// –ê–Ω—Ç–∏-—á–∏—Ç
document.addEventListener("visibilitychange",()=>{if(document.hidden&&running) resetAll();});
window.addEventListener("blur",()=>{if(running) resetAll();});

// –§–∏–Ω–∞–ª
function complete(){
  running=false;
  player.pause();
  document.getElementById("app").style.display="none";
  document.getElementById("finish").style.display="flex";
}

// –°–±—Ä–æ—Å
function resetAll(){
  running=false;
  clearInterval(interval);
  player.pause();
  player.currentTime=0;
  document.body.style.filter="none";
  document.getElementById("app").style.display="none";
  document.getElementById("finish").style.display="none";
  document.getElementById("tutorial").style.display="flex";
}
</script>
</body>
</html>
