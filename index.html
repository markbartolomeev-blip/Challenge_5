<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Just relax, ok?</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:#000;
  color:#fff;
  overflow:hidden;
  user-select:none;
}

#bg{
  position:fixed;
  inset:0;
  background:url("D0AB2572-11AE-47A3-AD8D-A31B53372CB5.jpeg") center/cover no-repeat;
  filter:brightness(.7);
  z-index:-2;
}

.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  z-index:10;
}

.box{
  max-width:90%;
  font-size:18px;
  line-height:1.5;
}

#app{
  position:relative;
  width:100%;
  height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}

#title{
  position:absolute;
  top:30px;
  font-size:22px;
  opacity:.9;
}

#timer{
  font-size:72px;
  font-weight:bold;
  letter-spacing:2px;
}
</style>
</head>

<body>

<div id="bg"></div>

<!-- –û–ë–£–ß–ï–ù–ò–ï -->
<div class="overlay" id="tutorial">
  <div class="box">
    <h2>–ù–µ–±–æ–ª—å—à–æ–µ –æ–±—É—á–µ–Ω–∏–µ</h2>
    <p>
      –ü—Ä–æ—Å—Ç–æ –ø–æ–¥–æ–∂–¥–∏ <b>15 –º–∏–Ω—É—Ç</b>.<br><br>
    </p>
    <br>
    <button onclick="start()">–û–∫–µ–π</button>
  </div>
</div>

<!-- –ò–ì–†–ê -->
<div id="app" style="display:none">
  <div id="title">Just relax, ok?</div>
  <div id="timer">15:00</div>
</div>

<!-- –§–ò–ù–ê–õ -->
<div class="overlay" id="finish" style="display:none">
  <div class="box">
    <h2>üéâ –ú–æ–ª–æ–¥–µ—Ü!</h2>
    <p>
      –¢—ã –ø—Ä–æ—à–µ–ª(-–∞)<br>
      <b>–º–∏–Ω–∏-–∏–≥—Ä—É ‚Ññ5</b>
    </p>
  </div>
</div>

<audio id="player" preload="auto"></audio>

<script>
const tracks=[
  "—Å–µ–ª—å–¥–µ—Ä–µ–∂—É–π,-shut-up!-2.0.mp3",
  "–¥–µ–±—é—Ç.–º—Å.–±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏.mp3.mp3",
  "–ö—É—Ä—á–∞—Ç–∫–∏–Ω–∞.m4a",
  "VIP –°–ö–ê–ú .mp3",
  "ScreenRecording_12-11-2025 09-03-05_1 (Cover).mp3"
];

let currentTrack=0;
let totalSeconds=15*60;
let interval=null;
let running=false;

const player=document.getElementById("player");
const timerEl=document.getElementById("timer");

function fmt(s){
  return String(Math.floor(s/60)).padStart(2,"0")+":"+
         String(s%60).padStart(2,"0");
}

function start(){
  document.getElementById("tutorial").style.display="none";
  document.getElementById("finish").style.display="none";
  document.getElementById("app").style.display="flex";
  running=true;
  totalSeconds=15*60;
  timerEl.textContent=fmt(totalSeconds);
  playTrack();
  startTimer();
}

function startTimer(){
  clearInterval(interval);
  interval=setInterval(()=>{
    totalSeconds--;
    timerEl.textContent=fmt(totalSeconds);

    if(totalSeconds===666){
      document.body.style.filter="hue-rotate(180deg)";
    }

    if(totalSeconds<=0){
      clearInterval(interval);
      complete();
    }
  },1000);
}

function complete(){
  running=false;
  player.pause();
  document.getElementById("app").style.display="none";
  document.getElementById("finish").style.display="flex";
}

function playTrack(){
  player.src=tracks[currentTrack];
  player.currentTime=0;
  player.play();
}

player.onended=()=>{
  currentTrack=(currentTrack+1)%tracks.length;
  playTrack();
};

/* –ê–ù–¢–ò-–ü–ê–£–ó–ê –ò –ü–ï–†–ï–ú–û–¢–ö–ê */
player.addEventListener("pause",()=>{
  if(running) player.play();
});

player.addEventListener("seeking",()=>{
  player.currentTime=0;
});

/* –ê–ù–¢–ò-–ß–ò–¢ */
document.addEventListener("visibilitychange",()=>{
  if(document.hidden && running){
    resetAll();
  }
});

window.addEventListener("blur",()=>{
  if(running) resetAll();
});

function resetAll(){
  running=false;
  clearInterval(interval);
  player.pause();
  player.currentTime=0;
  document.body.style.filter="none";
  document.getElementById("app").style.display="none";
  document.getElementById("finish").style.display="none";
  document.getElementById("tutorial").style.display="flex";
}
</script>

</body>
</html>
